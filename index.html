<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jonah Ortiz — Interview Assistant</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; }
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f0f0f0;
    }

    header.contact-info {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 140px;
      background-color: #121212;
      color: white;
      padding: 1em 2em;
      z-index: 1001;
      display: flex;
      flex-direction: column;
      justify-content: center;
      box-shadow: 0 3px 6px rgba(0,0,0,0.6);
    }

    header.contact-info h1 {
      font-size: 2.5em;
      margin: 0.2em 0 0.1em;
      font-weight: bold;
    }

    header.contact-info .tagline {
      font-size: 1.2em;
      margin: 0.1em 0 0.5em;
      font-weight: 500;
      color: #bbb;
    }

    header.contact-info p {
      margin: 0;
      font-size: 1em;
    }

    header.contact-info a {
      color: #bbdefb;
      text-decoration: none;
      margin-right: 0.5em;
    }

    header.contact-info a:hover { text-decoration: underline; }

    nav.navbar {
      position: fixed;
      top: 140px;
      left: 0;
      right: 0;
      background-color: #0b1a33;
      color: white;
      padding: 1em 2em;
      z-index: 1001;
      display: flex;
      gap: 2em;
      font-size: 1.1em;
    }

    nav.navbar a {
      color: white;
      text-decoration: none;
      font-weight: bold;
    }

    nav.navbar a:hover { text-decoration: underline; }

    aside#chat-container {
      position: fixed;
      top: 190px;
      left: 0;
      bottom: 0;
      width: 700px; /* doubled width */
      background: #ffffff;
      border-right: 1px solid #ddd;
      display: flex;
      flex-direction: column;
      box-shadow: 2px 0 5px rgba(0,0,0,0.1);
      z-index: 1000;
      padding: 0.5em;
      overflow-y: auto;
    }

    #chat-container header {
      background: #1e1e2f;
      color: white;
      padding: 1em;
      text-align: center;
      flex-shrink: 0;
      border-radius: 6px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.3);
    }

    #chat {
      flex: 1;
      padding: 1em;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      background: #fafafa;
      border-radius: 6px;
      margin-top: 0.5em;
      box-shadow: inset 0 0 8px #ddd;
    }

    form {
      display: flex;
      gap: 0.5em;
      padding: 1em 0 0 0;
      flex-shrink: 0;
    }

    input[type="text"] {
      flex: 1;
      padding: 0.75em;
      font-size: 1em;
      border: 1px solid #ccc;
      border-radius: 8px;
    }

    button {
      background: #1e1e2f;
      border: none;
      color: white;
      padding: 0 1.5em;
      font-size: 1em;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover { background: #333353; }

    .message {
      margin: 0.5em 0;
      max-width: 75%;
      padding: 0.75em 1em;
      border-radius: 15px;
      line-height: 1.3;
      word-wrap: break-word;
    }

    .user {
      background: #d0e6ff;
      color: #004a99;
      align-self: flex-end;
      border-bottom-right-radius: 2px;
    }

    .bot {
      background: #e5e5e5;
      color: #333;
      align-self: flex-start;
      border-bottom-left-radius: 2px;
    }

    main {
      margin-top: 190px;
      margin-left: 720px; /* adjusted to match new chatbot width */
      padding: 2em;
      background: white;
      min-height: calc(100vh - 190px);
      box-shadow: 0 0 15px rgba(0,0,0,0.05);
      border-radius: 8px;
      margin-right: 2em;
    }

    .content-columns {
      display: flex;
      flex-wrap: wrap;
      gap: 2em;
    }

    .column {
      flex: 1;
      min-width: 300px;
    }

    .cover-letter img {
      width: 100%;
      height: auto;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    @media (max-width: 1000px) {
      aside#chat-container {
        position: static;
        width: 100%;
        height: auto;
        box-shadow: none;
        border-right: none;
      }

      main {
        margin-left: 0;
      }
    }
  </style>
</head>
<body>
  <header class="contact-info">
    <h1>Jonah Ortiz</h1>
    <p class="tagline">Business Intelligence and Data Analytics Professional</p>
    <p>
      <a href="mailto:jonahg.ortiz@gmail.com">jonahg.ortiz@gmail.com</a> |
      <a href="tel:+19493702188">(949) 370-2188</a> |
      San Diego, CA |
      <a href="https://www.linkedin.com/in/jonahgortiz" target="_blank" rel="noopener">LinkedIn Profile</a>
    </p>
  </header>

  <nav class="navbar">
    <a href="index.html">Home</a>
    <a href="resume.html">Resume/CV Info</a>
    <a href="interview.html">Interview Scheduler</a>
  </nav>

  <aside id="chat-container">
    <header>
      <h2>Jonah's Chatbot Assistant</h2>
      <p style="font-size: 0.9em; margin: 0;">Ask me about the Candidate Jonah Ortiz! You can ask me about his skills, experience, or how to schedule a follow-up. Built using OpenAI Assistant & n8n Webhook Integration.</p>
    </header>
    <div id="chat" aria-live="polite" aria-atomic="false"></div>
    <form id="chat-form">
      <input type="text" id="user-input" autocomplete="off" placeholder="Type your question..." required />
      <button type="submit">Send</button>
    </form>
  </aside>

  <main>
    <section class="content-columns">
      <div class="column cover-letter">
        <h2>Welcome to My Website!</h2>
        <hr>
        <p>This website has a few different elements that bring it together. My HTML skills are pretty limited, but I wanted to showcase my ability to build something from scratch using AI tools. It was built primarily using OpenAI’s ChatGPT alongside other online resources.</p>
        <ul style="line-height: 1.5;">
          <li>The chatbot on the left uses a combination of an n8n AI workflow and ChatGPT Assistant to answer questions about my work experience.</li>
          <li>The AI chatbot was designed with many prompts to constrain responses and provide relevant feedback.</li>
          <li>The HTML was primarily coded by ChatGPT, with myself guiding the structure and content.</li>
        </ul>

        <h2>How I Built This</h2>
        <hr>
        <p>This section outlines the architecture and automation behind this AI-powered interview assistant. The chatbot you see on the left is fully integrated with a back-end workflow powered by <strong>n8n</strong> and <strong>OpenAI’s Assistant API</strong>. I built this using no-code and low-code tools that allow for dynamic, context-aware interactions with recruiters, hiring managers, and others exploring my qualifications.</p>

        <div style="margin-bottom: 2em;">
          <h3>Chatbot Integration (n8n + OpenAI Assistant)</h3>
          <img src="chatbot_integration.jpg" alt="Chatbot Integration Workflow" style="width: 60%; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); margin-top: 0.5em;">
          <p style="margin-top: 0.5em;">
            The chatbot was built leveraging the <strong>n8n AI workflow integration</strong> as shown above. The workflow ingests questions from users in the front-end, uses the Webhook integration from n8n to route the message to OpenAI, then parses and returns an intelligent reply—constrained by assistant instructions that ensure it only answers questions related to my professional experience.
          </p>
          <ul style="margin-top: 1em; padding-left: 1.5em; line-height: 1.6;">
            <li>Front-end JavaScript captures user input and sends it via POST to an <code>n8n.cloud</code> webhook endpoint.</li>
            <li>n8n Webhook node triggers a flow that forwards the request to OpenAI’s Assistant API using the HTTP Request node.</li>
            <li>OpenAI Assistant has been preloaded with structured prompt instructions focused on my resume, experience, and interview scheduling only.</li>
            <li>The response from OpenAI is captured, parsed, and returned back to the front-end chatbot.</li>
            <li>Context is preserved with a session ID passed from the browser to maintain conversation continuity.</li>
          </ul>
        </div>

        <div style="margin-bottom: 2em;">
          <h3>Email Automation Workflow</h3>
          <img src="email_automation.jpg" alt="Email Automation Workflow" style="width: 60%; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); margin-top: 0.5em;">
          <p style="margin-top: 0.5em;">
            When a user completes the interview request form, their submission triggers an <strong>automated email workflow</strong> inside n8n. This process ensures prompt delivery of structured interview request details to my inbox and logs the response for tracking.
          </p>
          <ul style="margin-top: 1em; padding-left: 1.5em; line-height: 1.6;">
            <li>The form is hosted via an n8n Form Trigger and posts structured data to a flow.</li>
            <li>The data is mapped into a formatted email using HTML or Markdown templates.</li>
            <li>Emails are dispatched using n8n’s built-in Gmail or SMTP node for delivery.</li>
            <li>Data can optionally be logged into Airtable, Google Sheets, or Notion for recordkeeping.</li>
            <li>Each submission includes context like company, interview request type, and preferred time block.</li>
          </ul>
        </div>
      </div>
    </section>
  </main>

  <script>
    const chat = document.getElementById('chat');
    const form = document.getElementById('chat-form');
    const input = document.getElementById('user-input');

    let sessionId = sessionStorage.getItem('sessionId');
    if (!sessionId) {
      sessionId = crypto.randomUUID();
      sessionStorage.setItem('sessionId', sessionId);
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const userMessage = input.value.trim();
      if (!userMessage) return;
      input.value = '';
      appendMessage(userMessage, 'user');
      const typingIndicator = appendMessage('Bot is typing...', 'bot', true);
      typingIndicator.classList.add('typing');

      try {
        const response = await fetch('https://jonahgortiz.app.n8n.cloud/webhook/interview-bot', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message: userMessage, sessionId: sessionId })
        });

        if (!response.ok) throw new Error(`Network error: ${response.status}`);

        const data = await response.json();
        const botReply = data.reply || data.message || "Sorry, I didn't get a response.";
        typingIndicator.textContent = botReply;
        typingIndicator.classList.remove('typing');
      } catch (error) {
        typingIndicator.textContent = 'Error: Unable to reach the chatbot.';
        typingIndicator.classList.remove('typing');
      }
    });

function appendMessage(text, sender, returnNode = false) {
  const div = document.createElement('div');
  div.classList.add('message', sender);

  // Allow HTML for bot replies, sanitize user input
  if (sender === 'bot') {
    div.innerHTML = text;
  } else {
    div.textContent = text;
  }

  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
  return returnNode ? div : undefined;
}
    }
  </script>
</body>
</html>
